[build]
  publish = "."
  command = "node -e \"const fs=require('fs'); fs.writeFileSync('supabase.config.js', `export const SUPABASE_CONFIG = { url: '${process.env.SUPABASE_URL}', anonKey: '${process.env.SUPABASE_ANON_KEY}' };`);\" && npm ci && npm run build"

# Optional: keep dev dependencies for Tailwind build
[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--version"
